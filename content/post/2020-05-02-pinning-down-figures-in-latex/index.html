---
title: Pinning down figures in LaTeX
author: Zak Varty
date: '2020-05-02'
slug: pinning-down-figures-in-latex
categories:
  - LaTeX
tags:
  - LaTeX
  - float
subtitle: 'Get a grip on floating environments'
summary: 'How to keep floats where you want them while using LaTeX'
authors: []
lastmod: '2020-05-02T08:03:59+01:00'
featured: no
image:
  caption: 'Photo by AbsolutVision on Unsplash'
  focal_point: ''
  preview_only: no
projects: []
---



<!-- what is LaTeX -->
<blockquote>
<p>One quick thing up before I start. LaTeX, or more properly <span class="math inline">\(\LaTeX\)</span>, is not pronounced like the rubbery matrial latex. The <span class="math inline">\(TeX\)</span> part of the word LaTeX comes from the greek <span class="math inline">\(\tau \acute{\epsilon} \chi\nu\eta\)</span> meaning art, craftsmanship, or style. The X on the end is therefore a capital chi (lowercase <span class="math inline">\(\chi\)</span>), meaning that LaTeX should be pronounced “lay-tech” and rhymes with the word neck.</p>
</blockquote>
<div id="latex-what-is-it-and-why-use-it" class="section level2">
<h2><span class="math inline">\(\LaTeX\)</span>: what is it and why use it?</h2>
<p>LaTeX is the standard document preparation system for scientific writing. The range of documents that can be produced using LaTeX include: short reports, academic papers, lecture notes, books, presentations and posters. When making these documents LaTeX serves a similar purpose as a word processor but with one important distinction. The content of the document (the words, equations and pictures) are treated separately from the presentation of the document (fonts, layout, paper dimensions, referencing style).</p>
<p>The separation of content and style make LaTeX a very powerful tool that allows you to focus on the document content while writing and leave someone else (or future you) to worry about how to make that look appealing. This gives an easy way for academic journals or book publishers to achieve a consistent `look’ or feel across all of their products.</p>
<p>LaTeX is also particularly good for typesetting maths and for handling references, which make it a treasure of the academic community. External references are separated from the referencing style (APA, Harvard etc.) allowing this to be easily changed. Internal references to figures, sections or chapters are separated from the order that they appear in the document. This allows you to add in an extra figure or swap the order of two chapters without the pain of spending hours re-numbering everything that follows.</p>
</div>
<div id="the-problem-with-floats" class="section level2">
<h2>The problem with floats</h2>
<p>LaTeX takes your content and arranges it in a (hopefully) pleasing way on the page by creating titles, headings, cross-references and a bibliography in the requested format. The location of figures and tables move around within the text so that they fit nicely on the page. These moveable elements are enclosed in floating environments such the figure or table environment.</p>
<pre><code>  \begin{figure}[]
    \includegraphics[width = 0.8\textwidth]{./path_to/fig.pdf}
    \label{fig:label_text}
    \caption{A floating figure}
  \end{figure}</code></pre>
<!-- why can they be problematic ? -->
<p>Floating environments can be cause a lot of trouble when using LaTex. While LaTeX is good at coming up with reasonable locations for floating environments it is by no means perfect. Sometimes floating environments can end up very far away from where they are added when writing the document.</p>
<p>This leads to two sources of annoyance when creating a long-form doucment such as a report or book. Firstly, it means the reader has to do lots of page-flipping to see the figure or table while reading its description. Secondly and more importantly floating environments can stray into other parts of the document, appearing in the wrong section or chapter!</p>
<p>In other circumstances you don’t want LaTeX to be able to move your floating environments at all. On a poster for examlpe you want figures and tables to appear in exactly the place you created them, but also with the pretty formatting provided by float environments.</p>
<p>So how do we control or fix the placement of floating environments? There are (at least) three possible ways of doing this.</p>
</div>
<div id="solution-1-float-placement-specifiers" class="section level2">
<h2>Solution 1: float placement specifiers</h2>
<p>When creating a float environement you can add placement specifiers so say where that float is allowed to appear. These go in square brackets after beginging the float.</p>
<pre><code>   \begin{figure}[htbp!]
    \includegraphics[width = 0.8\textwidth]{./path_to/fig.pdf}
    \label{fig:label_text}
    \caption{A floating figure}
  \end{figure}</code></pre>
<p>The specifiers have the following interpretations:</p>
<ul>
<li><code>h</code> float can appear in-line ‘here’, if it fits here;</li>
<li><code>t</code> float can appear in top of a page/column before any text;</li>
<li><code>b</code> float can appear at bottom of a page/column after all text;</li>
<li><code>p</code> float can appear on a new page or column section dedicated to floats;</li>
<li><code>!</code> relax rules on total number and size of floats on a page/column.</li>
</ul>
<p>The order in which you give these does not carry peference, so <code>[tb]</code> will have the same effect as <code>[bt]</code>. Usually setting these to be <code>[htbp!]</code> will keep floats relatively close-by in a long form document. It doesn’t stop them from flowing over into new sections or chapters though.</p>
<p>You can learn more about the rules determining float placement in this <a href="https://www.latex-project.org/publications/indexbytopic/2e-floats/">paper by the latex project</a> or this <a href="https://tex.stackexchange.com/questions/39017/how-to-influence-the-position-of-float-environments-like-figure-and-table-in-lat">stackoverflow post</a>.</p>
</div>
<div id="solution-2-the-assertive-here-specifier" class="section level2">
<h2>Solution 2: the assertive-here specifier</h2>
<p>If you want to rigidly place a floating envirionment at a set in-line location, the <code>floats</code> LaTeX package allows this by adding the assertive here-specifier <code>H</code>. To use the <code>floats</code> package add the following line to your preamble (everything that comes before <code>\begin{document}</code>):</p>
<pre><code>\usepackage{floats}</code></pre>
<p>This specifier is not recommended in long documents because it can lead to some pretty funky layouts. For posters though, this can be an ideal solution. It can however be useful in a short or completed project to moving around one or two floats.</p>
<p>Using <code>H</code> will ensure that your floats appear in the correct section or chapter of the document but in a brittle way. Forcing float loactions so specifically can lead to a lot of awkward black space that needs to be fixed further down the line.</p>
</div>
<div id="solution-3-float-barriers" class="section level2">
<h2>Solution 3: float barriers</h2>
<p>A more flexible and robust way to prevent floats from spilling out of their intended part of the document is to use the <code>placeins</code> package. Do this by adding the following to the preamble of your document:</p>
<pre><code>\usepackage[section]{placeins}</code></pre>
<p>This will prevent any floats from being placed ouside of the section in which they are defined. The <code>section</code> here can be lowered to <code>subsection</code>, or raised to <code>chapter</code> depending on the level of flexibility you want to allow (nb: chapters only exist when <code>\documentclass{book}</code> is used). Leave the square brackets empty to allow the usual overflow behaviour again. Larger settings usually result in better outcomes when using the <code>placeins</code> package.</p>
<p>To help the placement of one or two awkward plots the package also provides the <code>\FloatBarrier</code> command. This is used in-line to create an extra barrier beyond which floats can not be placed. This helps to control how far forward floats can move and a similar effect to the <code>H</code> specifier can be achieved by sandwiching a foating environmnet between two <code>\FloatBarrier</code> lines.</p>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>I have covered three ways of avoiding LaTeX woes regarding float placement. I’m sure there are a million other solutions but these three have gotten me past every problem I’ve had so far!</p>
</div>
